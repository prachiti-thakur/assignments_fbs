1) Create the table Member, Books and Issue without any constraints as 
mentioned in the schema description above.
Database changed
mysql> create table member
    -> (member_id int,
    -> member_name varchar(30),
    -> member_address varchar(50),
    -> acc_open_date date,
    -> membership_type varchar(20),
    -> fees_paid int,
    -> max_books_allowed int,
    -> penalty_amount decimal(7,2));
Query OK, 0 rows affected (0.04 sec)
mysql> create table library
    -> (book_no int,
    -> book_name varchar(30),
    -> author_name varchar(30),
    -> cost decimal(7,2),
    -> category char(10));
mysql> create table books
    -> (lib_issue_id int,
    -> book_no int,
    -> member_id int,
    -> issue_date date,
    -> return_date date);


2) View the structure of the tables.

mysql> desc member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| member_id         | int          | YES  |     | NULL    |       |
| member_name       | varchar(30)  | YES  |     | NULL    |       |
| member_address    | varchar(50)  | YES  |     | NULL    |       |
| acc_open_date     | date         | YES  |     | NULL    |       |
| membership_type   | varchar(20)  | YES  |     | NULL    |       |
| fees_paid         | int          | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| penalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec)

mysql> desc library;
+-------------+--------------+------+-----+---------+-------+
| Field       | Type         | Null | Key | Default | Extra |
+-------------+--------------+------+-----+---------+-------+
| book_no     | int          | YES  |     | NULL    |       |
| book_name   | varchar(30)  | YES  |     | NULL    |       |
| author_name | varchar(30)  | YES  |     | NULL    |       |
| cost        | decimal(7,2) | YES  |     | NULL    |       |
| category    | char(10)     | YES  |     | NULL    |       |
+-------------+--------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> desc books;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
3) Drop the Member table
mysql> drop table member;
Query OK, 0 rows affected (0.03 sec)

mysql> desc table;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
mysql> show tables;
+---------------+
| Tables_in_fbs |
+---------------+
| account       |
| books         |
| countries     |
| custumer      |
| department    |
| employee      |
| fbs_student   |
| job_histry    |
| jobs          |
| library       |
| project       |
| student       |
+---------------+

4) Create the table Member again as per the schema description with the 
following constraints.
a. Member_Id – Primary Key
b. Membership_type - ‘Lifetime’,’ Annual’, ‘Half Yearly’,’ Quarterly’


mysql> create table member
    -> (member_id int primary key,
    -> member_name varchar(30),
    -> member_address varchar(50),
    -> acc_open_date date,
    -> membership_type varchar(20) check(membership_type in("lifetime","Annual","half yearly","Quarterly")),
    -> max_books_allowed int,
    -> penalty_amount decimal(7,2));
Query OK, 0 rows affected (0.04 sec)

mysql> desc member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| member_id         | int          | NO   | PRI | NULL    |       |
| member_name       | varchar(30)  | YES  |     | NULL    |       |
| member_address    | varchar(50)  | YES  |     | NULL    |       |
| acc_open_date     | date         | YES  |     | NULL    |       |
| membership_type   | varchar(20)  | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| penalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)

mysql> show create table member;
+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table  | Create Table






               |
+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| member | CREATE TABLE `member` (
  `member_id` int NOT NULL,
  `member_name` varchar(30) DEFAULT NULL,
  `member_address` varchar(50) DEFAULT NULL,
  `acc_open_date` date DEFAULT NULL,
  `membership_type` varchar(20) DEFAULT NULL,
  `max_books_allowed` int DEFAULT NULL,
  `penalty_amount` decimal(7,2) DEFAULT NULL,
  PRIMARY KEY (`member_id`),
  CONSTRAINT `member_chk_1` CHECK ((`membership_type` in (_utf8mb4'lifetime',_utf8mb4'Annual',_utf8mb4'half yearly',_utf8mb4'Quarterly')))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
+--------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.01 sec)


5) Modify the table Member increase the width of the member name to 30 
characters.
mysql> alter table member modify column member_name varchar(30);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+-------------------+--------------+------+-----+---------+-------+
| Field             | Type         | Null | Key | Default | Extra |
+-------------------+--------------+------+-----+---------+-------+
| member_id         | int          | NO   | PRI | NULL    |       |
| member_name       | varchar(30)  | YES  |     | NULL    |       |
| member_address    | varchar(50)  | YES  |     | NULL    |       |
| acc_open_date     | date         | YES  |     | NULL    |       |
| membership_type   | varchar(20)  | YES  |     | NULL    |       |
| max_books_allowed | int          | YES  |     | NULL    |       |
| penalty_amount    | decimal(7,2) | YES  |     | NULL    |       |
+-------------------+--------------+------+-----+---------+-------+

6) Add a column named as Reference of Char(30) to Issue table
mysql> alter table books add column reference char(30);
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc books;
+--------------+----------+------+-----+---------+-------+
| Field        | Type     | Null | Key | Default | Extra |
+--------------+----------+------+-----+---------+-------+
| lib_issue_id | int      | YES  |     | NULL    |       |
| book_no      | int      | YES  |     | NULL    |       |
| member_id    | int      | YES  |     | NULL    |       |
| issue_date   | date     | YES  |     | NULL    |       |
| return_date  | date     | YES  |     | NULL    |       |
| reference    | char(30) | YES  |     | NULL    |       |
+--------------+----------+------+-----+---------+-------+

7) Delete/Drop the column Reference from Issue.

mysql> desc books;
+--------------+----------+------+-----+---------+-------+
| Field        | Type     | Null | Key | Default | Extra |
+--------------+----------+------+-----+---------+-------+
| lib_issue_id | int      | YES  |     | NULL    |       |
| book_no      | int      | YES  |     | NULL    |       |
| member_id    | int      | YES  |     | NULL    |       |
| issue_date   | date     | YES  |     | NULL    |       |
| return_date  | date     | YES  |     | NULL    |       |
| reference    | char(30) | YES  |     | NULL    |       |
+--------------+----------+------+-----+---------+-------+
6 rows in set (0.00 sec)

mysql> alter table books drop column reference;
Query OK, 0 rows affected (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc books;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |


8) Rename the table Issue to Lib_Issue.


mysql> rename table books to lib_issue;
Query OK, 0 rows affected (0.03 sec)

mysql> desc lib_issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | YES  |     | NULL    |       |
| book_no      | int  | YES  |     | NULL    |       |
| member_id    | int  | YES  |     | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
***************************************************************************************************************
9) Insert following data in table Member
Member 
ID
Member 
Name
Member 
Address
Acc_Open_Date Membership_type Fees_Paid Max_Books
_Allowed
Penalty_
Amount
1 Richa
Sharma
Pune 10-12-05 Lifetime 25000 5 50
2 Garima 
Sen
Pune current date Annual 1000 3 Null

ans-->

mysql> insert into member values(1,"Richa sharma","pune","2005-12-10","Annul",25000,5,50);
Query OK, 1 row affected (0.04 sec)

mysql> insert into member values(2,"garima sen","pune",now(),"lifetime",1000,3,Null);
Query OK, 1 row affected, 1 warning (0.02 sec)

mysql> select * from member;
+-----------+--------------+----------------+---------------+-----------------+-----------+------------------+----------------+
| member_id | member_name  | member_address | acc_open_date | membership_type | fees_paid | max_book_allowed | penalty_amount |
+-----------+--------------+----------------+---------------+-----------------+-----------+------------------+----------------+
|         1 | Richa sharma | pune           | 2005-12-10    | Annul
  |     25000 |                5 |          50.00 |
|         2 | garima sen   | pune           | 2024-06-07    | lifetime        |      1000 |                3 |           NULL |
+-----------+--------------+----------------+---------------+-----------------+-----------+------------------+----------------+

10) Insert at least 5 records with suitable data

mysql> insert into member values(3,"prachiti thakur","Pune","2004-06-04","Qu
arterly",8000,4,NULL);
Query OK, 1 row affected (0.02 sec)

mysql> insert into member values(4,"shreya zinzade","Mumbai","2005-04-06","H
alf Yearly",5000,6,60);
Query OK, 1 row affected (0.02 sec)

mysql> insert into member values(5,"pari thakur","Nagpur","2006-06-01","Half Yearly",6700,6,40);
Query OK, 1 row affected (0.02 sec)

mysql> insert into member values(6,"akash patil","banglore","2023-12-01","Lifetime",4000,3,30);
Query OK, 1 row affected (0.02 sec)

mysql> insert into member values(7,"mihir joshi","mumbai","2022-11-01","Quarterly",3400,3,20);
Query OK, 1 row affected (0.00 sec)

mysql> select * from member;
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
| member_id | member_name     | member_address | acc_open_date | membership_type | fees_paid | max_book_allowed | penalty_amount |
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
|         1 | Richa sharma    | pune           | 2005-12-10    | lifetime        |     25000 |                5 |          50.00 |
|         2 | garima sen      | pune           | 2024-06-07    | Annul           |      1000 |                3 |           NULL |
|         3 | prachiti thakur | Pune           | 2004-06-04    | quarterly       |      8000 |                4 |           NULL |
|         4 | shreya zinzade  | Mumbai         | 2005-04-06    | half yearly     |      5000 |                6 |          60.00 |
|         5 | pari thakur     | Nagpur         | 2006-06-01    | half yearly     |      6700 |                6 |          40.00 |
|         6 | akash patil     | banglore       | 2023-12-01    | lifetime        |      4000 |                3 |          30.00 |
|         7 | mihir joshi     | mumbai         | 2022-11-01    | quarterly       |      3400 |                3 |          20.00 |
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
11) Modify the column Member_name. Decrease the width of the member 
name to 20 characters. (If it does not allow state the reason for that)

mysql> alter table member modify column member_name varchar(20);

12) Try to insert a record with Max_Books_Allowed = 110, Observe the 
error that comes. 

mysql> insert into member values(8,"pragati saste","satara","2002-03-04","Lifetime",900,1,30);
Query OK, 1 row affected (0.02 sec)

mysql> select * from member;
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
| member_id | member_name     | member_address | acc_open_date | membership_type | fees_paid | max_book_allowed | penalty_amount |
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
|         1 | Richa sharma    | pune           | 2005-12-10    | lifetime        |     25000 |                5 |          50.00 |
|         2 | garima sen      | pune           | 2024-06-07    | Annul           |      1000 |                3 |           NULL |
|         3 | prachiti thakur | Pune           | 2004-06-04    | quarterly       |      8000 |                4 |           NULL |
|         4 | shreya zinzade  | Mumbai         | 2005-04-06    | half yearly     |      5000 |                6 |          60.00 |
|         5 | pari thakur     | Nagpur         | 2006-06-01    | half yearly     |      6700 |                6 |          40.00 |
|         6 | akash patil     | banglore       | 2023-12-01    | lifetime        |      4000 |                3 |          30.00 |
|         7 | mihir joshi     | mumbai         | 2022-11-01    | quarterly       |      3400 |                3 |          20.00 |
|         8 | pragati saste   | satara         | 2002-03-04    | lifetime        |       900 |                1 |          30.00 |
+-----------+-----------------+----------------+---------------+------------

13) Generate another table named Member101 using a Create command 
along with a simple SQL query on member table.
mysql> create table member101 as(select * from member);
Query OK, 8 rows affected (0.04 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> select * from member101;
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
| member_id | member_name     | member_address | acc_open_date | membership_type | fees_paid | max_book_allowed | penalty_amount |
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
|         1 | Richa sharma    | pune           | 2005-12-10    | lifetime        |     25000 |                5 |          50.00 |
|         2 | garima sen      | pune           | 2024-06-07    | Annul           |      1000 |                3 |           NULL |
|         3 | prachiti thakur | Pune           | 2004-06-04    | quarterly       |      8000 |                4 |           NULL |
|         4 | shreya zinzade  | Mumbai         | 2005-04-06    | half yearly     |      5000 |                6 |          60.00 |
|         5 | pari thakur     | Nagpur         | 2006-06-01    | half yearly     |      6700 |                6 |          40.00 |
|         6 | akash patil     | banglore       | 2023-12-01    | lifetime        |      4000 |                3 |          30.00 |
|         7 | mihir joshi     | mumbai         | 2022-11-01    | quarterly       |      3400 |                3 |          20.00 |
|         8 | pragati saste   | satara         | 2002-03-04    | lifetime        |       900 |                1 |          30.00 |
+-----------+-----------------+----------------+---------------+------------

14) Add the constraints on columns max_books_allowed and penalty_amt 
as follows
a. max_books_allowed < 100
b. penalty_amt maximum 1000
 Also give names to the constraints

mysql> alter table member101 add constraint maxbook check(max_book_allowed<100);
mysql> alter table member101 add constraint penulty check(penalty_amount <=1000);
Query OK, 8 rows affected (0.05 sec)
Records: 8  Duplicates: 0  Warnings: 0

mysql> show create table member101;
+-----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table     | Create Table



                                                                                                   |
+-----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| member101 | CREATE TABLE `member101` (
  `member_id` int NOT NULL,
  `member_name` varchar(20) DEFAULT NULL,
  `member_address` varchar(50) DEFAULT NULL,
  `acc_open_date` date DEFAULT NULL,
  `membership_type` enum('lifetime','Annul','half yearly','quarterly') DEFAULT NULL,
  `fees_paid` int DEFAULT NULL,
  `max_book_allowed` int DEFAULT NULL,
  `penalty_amount` decimal(7,2) DEFAULT NULL,
  CONSTRAINT `maxbook` CHECK ((`max_book_allowed` < 100)),
  CONSTRAINT `penulty` CHECK ((`penalty_amount` <= 1000))
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |
***************************************************************************************************************
15) Drop the table books
mysql> show tables;
+-----------------+
| Tables_in_agnmt |
+-----------------+
| book            |
| library         |
| member          |
| member101       |
+-----------------+
4 rows in set (0.00 sec)

mysql> drop table book;
Query OK, 0 rows affected (0.01 sec)

mysql> desc book;
ERROR 1146 (42S02): Table 'agnmt.book' doesn't exist
mysql>
******************************************************************************************************************************
16) Create table Books again as per the schema description with the 
following constraints.
a. Book_No – Primary Key
b. Book_Name – Not Null
c. Category – System, Fiction, Database, RDBMS, Other
mysql> create table book
    -> (book_no int primary key,
    -> book_name varchar(30) not null,
    -> author_name varchar(30),
    -> cost decimal(7,2),
    -> category enum("system","fiction","databases","RDBMS","others"));
Query OK, 0 rows affected (0.02 sec)

mysql> desc book;
+-------------+-------------------------------------------------------+------+-----+---------+-------+
| Field       | Type                                                  | Null | Key | Default | Extra |
+-------------+-------------------------------------------------------+------+-----+---------+-------+
| book_no     | int                                                   | NO   | PRI | NULL    |       |
| book_name   | varchar(30)                                           | NO   |     | NULL    |       |
| author_name | varchar(30)                                           | YES  |     | NULL    |       |
| cost        | decimal(7,2)                                          | YES  |     | NULL    |       |
| category    | enum('system','fiction','databases','RDBMS','others') | YES  |     | NULL    |       |
+-------------+-------------------------------------------------------+------+-----+---------+-------+
******************************************************************************************************************************
17) Insert data in Book table as follows:
Book_N
o
Book Name Author Cost Categorymysql> insert into book values(1,"Lets us c","Denis Ritchie" ,450,"system"),
    -> (2,"oracle complete ref","loni",550,"databases");
101 Let us C Denis 
Ritchie
450 System
102 Oracle –
Complete Ref
Loni 550 Database
103 Mastering SQL Loni 250 Database
104 PL SQL-Ref Scott 
Urman
750 Databas
-->mysql> insert into book values(1,"Lets us c","Denis Ritchie" ,450,"system"),
    -> (2,"oracle complete ref","loni",550,"databases");

mysql> insert into book values(103,"Mastering SQL","Loni
    "> ",250,"databases"),(104,"Pl-Sql","scott urman",750,"databases");
Query OK, 2 rows affected (0.00 sec)
******************************************************************************************************************************
18) Insert more records in Book table
mysql> insert into book values(105,"Ravan","sharad tandale",350,"fiction");
Query OK, 1 row affected (0.01 sec)

mysql> insert into book values(106,"c++","balgurusami",560,"system");
Query OK, 1 row affected (0.02 sec)

mysql> insert into book values(107,"OOp","graddy bouch",890,"system");
Query OK, 1 row affected (0.00 sec)

mysql> select * from book;
+---------+---------------------+----------------+--------+-----------+
| book_no | book_name           | author_name    | cost   | category  |
+---------+---------------------+----------------+--------+-----------+
|     101 | Lets us c           | Denis Ritchie  | 450.00 | system    |
|     102 | oracle complete ref | loni           | 550.00 | databases |
|     103 | Mastering SQL       | Loni
          | 250.00 | databases |
|     104 | Pl-Sql              | scott urman    | 750.00 | databases |
|     105 | Ravan               | sharad tandale | 350.00 | fiction   |
|     106 | c++                 | balgurusami    | 560.00 | system    |
|     107 | OOp                 | graddy bouch   | 890.00 | system    |
+---------+---------------------+----------------+--------+-----------+
7 rows in set (0.00 sec)
******************************************************************************************************************************
19) View the data in the tables using simple SQL query.

mysql> select * from book;
+---------+---------------------+----------------+--------+-----------+
| book_no | book_name           | author_name    | cost   | category  |
+---------+---------------------+----------------+--------+-----------+
|     101 | Lets us c           | Denis Ritchie  | 450.00 | system    |
|     102 | oracle complete ref | loni           | 550.00 | databases |
|     103 | Mastering SQL       | Loni
          | 250.00 | databases |
|     104 | Pl-Sql              | scott urman    | 750.00 | databases |
|     105 | Ravan               | sharad tandale | 350.00 | fiction   |
|     106 | c++                 | balgurusami    | 560.00 | system    |
|     107 | OOp                 | graddy bouch   | 890.00 | system    |
+---------+---------------------+----------------+--------+-----------+
******************************************************************************************************************************
20) Insert into Book following data.
105, National Geographic, Adis Scott, 1000, Scienc
-->

mysql> insert into book values(105,"national geographic","adis scott",100,"science");
ERROR 1265 (01000): Data truncated for column 'category' at row 1
mysql> insert into book values(105,"national geographic","adis scott",100,"others");
Query OK, 1 row affected (0.00 sec)

mysql> select * from book;
+---------+---------------------+---------------+--------+-----------+
| book_no | book_name           | author_name   | cost   | category  |
+---------+---------------------+---------------+--------+-----------+
|     101 | Lets us c           | Denis Ritchie | 450.00 | system    |
|     102 | oracle complete ref | loni          | 550.00 | databases |
|     103 | Mastering SQl       | loni          | 550.00 | databases |
|     104 | Pl-Sql              | scott urman   | 750.00 | databases |
|     105 | national geographic | adis scott    | 100.00 | others    |
|     106 | c++                 | balgurusami   | 560.00 | system    |
|     107 | OOp                 | graddy bouch  | 890.00 | system    |
+---------+---------------------+---------------+--------+-----------+
**************************************************************************************************************************
21) Rename the table Lib_Issue to Issue

mysql> rename table lib_issue to issue;
Query OK, 0 rows affected (0.01 sec)

mysql> show tables;
+-----------------+
| Tables_in_agnmt |
+-----------------+
| book            |
| issue           |
| library         |
| member          |
| member101       |
+-----------------+
**********************************************************************************************************************
22) Drop table Issue.
mysql> drop table issue;
Query OK, 0 rows affected (0.01 sec)

mysql> show tables;
+-----------------+
| Tables_in_agnmt |
+-----------------+
| book            |
| library         |
| member          |
| member101       |
+-----------------+
**********************************************************************************************************************
23) As per the given structure Create table Issue again with following 
constraints.
 Lib_Issue_Id-Primary key
 Book_No- foreign key
 Member_id - foreign key
 Issue_date
 Return_date

mysql> alter table member101 add primary key(member_id);
Query OK, 0 rows affected (0.05 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> create table issue
    -> (lib_issue_id int primary key,
    -> book_no int,
    -> member_id int,
    -> issue_date date,
    -> return_date date,
    -> foreign key(book_no)
    -> references book(book_no),
    -> foreign key(member_id)
    -> references member101(member_id));
Query OK, 0 rows affected (0.02 sec)

mysql> show create table issue;
| issue | CREATE TABLE `issue` (
  `lib_issue_id` int NOT NULL,
  `book_no` int DEFAULT NULL,
  `member_id` int DEFAULT NULL,
  `issue_date` date DEFAULT NULL,
  `return_date` date DEFAULT NULL,
  PRIMARY KEY (`lib_issue_id`),
  KEY `book_no` (`book_no`),
  KEY `member_id` (`member_id`),
  CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`book_no`) REFERENCES `book` (`book_no`),
  CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`member_id`) REFERENCES `member101` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |

**********************************************************************************************************************
24) Insert following data into Issue table. 
mysql> insert into issue (lib_issue_id,book_no,member_id,issue_date) values(7001,101,1,"2006-12-10"),
    -> (7002,102,2,"2006-12-25"),(7003,104,1,"2006-12-06");
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> insert into issue (lib_issue_id,book_no,member_id,issue_date)values(7004,101,1,"2006-06-04"),
    -> (7005,104,2,"2006-11-06"),(7006,101,3,"2006-02-18");
**********************************************************************************************************************

25) Remove the constraints on Issue table
mysql> alter table issue drop primary key;
mysql> alter table issue drop constraint `issue_ibfk_1`;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table issue drop constraint `issue_ibfk_2`;
**********************************************************************************************************************
26) Insert a record in Issue table. The member_id should not exist in 
member table
mysql> insert into issue values(1,102,9,"2006-04-09",NULL);

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-06-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-06 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
|            1 |     102 |         9 | 2006-04-09 | NULL        |
+--------------+---------+-----------+------------+-------------+
**********************************************************************************************************************
27) Now enable the constraints of Issue table. Observe the error
mysql> alter table issue add foreign key(book_no) references book(book_no),
    -> add foreign key(member_id) references member101(member_id);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`agnmt`.`#sql-1894_9`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`member_id`) REFERENCES `member101` (`member_id`))
mysql>
**********************************************************************************************************************
28) Delete the record inserted at Q-27) and enable the constraints

mysql> delete from issue where lib_issue_id=1;
mysql> alter table issue add foreign key(member_id) references member101(member_id);
Query OK, 6 rows affected (0.03 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> show create table issue;
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table | Create Table



                                                  |
+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| issue | CREATE TABLE `issue` (
  `lib_issue_id` int NOT NULL,
  `book_no` int DEFAULT NULL,
  `member_id` int DEFAULT NULL,
  `issue_date` date DEFAULT NULL,
  `return_date` date DEFAULT NULL,
  PRIMARY KEY (`lib_issue_id`),
  KEY `book_no` (`book_no`),
  KEY `member_id` (`member_id`),
  CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`book_no`) REFERENCES `book` (`book_no`),
  CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`member_id`) REFERENCES `member101` (`member_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |

**********************************************************************************************************************

29) Try to delete the record of member id 1 from member table and 
observe the error
 delete from member101 where member_id=1;
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`agnmt`.`issue`, CONSTRAINT `issue_ibfk_2` FOREIGN KEY (`member_id`) REFERENCES `member101` (`member_id`))
we cannot delete it as it is referred to the another table as a foreign key solution on delete set=NULL or on delete cascate, while adding foreign key constraint,
**********************************************************************************************************************
30) View the data and structure of all the three tables Member, 
Issue, Book
mysql> desc member101;
+------------------+----------------------------------------------------+------+-----+---------+-------+
| Field            | Type                                               | Null | Key | Default | Extra |
+------------------+----------------------------------------------------+------+-----+---------+-------+
| member_id        | int                                                | NO   | PRI | NULL    |       |
| member_name      | varchar(20)                                        | YES  |     | NULL    |       |
| member_address   | varchar(50)                                        | YES  |     | NULL    |       |
| acc_open_date    | date                                               | YES  |     | NULL    |       |
| membership_type  | enum('lifetime','Annul','half yearly','quarterly') | YES  |     | NULL    |       |
| fees_paid        | int                                                | YES  |     | NULL    |       |
| max_book_allowed | int                                                | YES  |     | NULL    |       |
| penalty_amount   | decimal(7,2)                                       | YES  |     | NULL    |       |
+------------------+----------------------------------------------------+------+-----+---------+-------+
8 rows in set (0.00 sec)

mysql> select * from member101;
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
| member_id | member_name     | member_address | acc_open_date | membership_type | fees_paid | max_book_allowed | penalty_amount |
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
|         1 | Richa sharma    | pune           | 2005-12-10    | lifetime        |     25000 |                5 |          50.00 |
|         2 | garima sen      | pune           | 2024-06-07    | Annul           |      1000 |                3 |           NULL |
|         3 | prachiti thakur | Pune           | 2004-06-04    | quarterly       |      8000 |                4 |           NULL |
|         4 | shreya zinzade  | Mumbai         | 2005-04-06    | half yearly     |      5000 |                6 |          60.00 |
|         5 | pari thakur     | Nagpur         | 2006-06-01    | half yearly     |      6700 |                6 |          40.00 |
|         6 | akash patil     | banglore       | 2023-12-01    | lifetime        |      4000 |                3 |          30.00 |
|         7 | mihir joshi     | mumbai         | 2022-11-01    | quarterly       |      3400 |                3 |          20.00 |
|         8 | pragati saste   | satara         | 2002-03-04    | lifetime        |       900 |                1 |          30.00 |
+-----------+-----------------+----------------+---------------+-----------------+-----------+------------------+----------------+
8 rows in set (0.00 sec)

mysql> desc book;
+-------------+-------------------------------------------------------+------+-----+---------+-------+
| Field       | Type                                                  | Null | Key | Default | Extra |
+-------------+-------------------------------------------------------+------+-----+---------+-------+
| book_no     | int                                                   | NO   | PRI | NULL    |       |
| book_name   | varchar(30)                                           | NO   |     | NULL    |       |
| author_name | varchar(30)                                           | YES  |     | NULL    |       |
| cost        | decimal(7,2)                                          | YES  |     | NULL    |       |
| category    | enum('system','fiction','databases','RDBMS','others') | YES  |     | NULL    |       |
+-------------+-------------------------------------------------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> select * from book;
+---------+---------------------+---------------+--------+-----------+
| book_no | book_name           | author_name   | cost   | category  |
+---------+---------------------+---------------+--------+-----------+
|     101 | Lets us c           | Denis Ritchie | 450.00 | system    |
|     102 | oracle complete ref | loni          | 550.00 | databases |
|     103 | Mastering SQl       | loni          | 550.00 | databases |
|     104 | Pl-Sql              | scott urman   | 750.00 | databases |
|     105 | national geographic | adis scott    | 100.00 | others    |
|     106 | c++                 | balgurusami   | 560.00 | system    |
|     107 | OOp                 | graddy bouch  | 890.00 | system    |
+---------+---------------------+---------------+--------+-----------+
7 rows in set (0.00 sec)

mysql> desc issue;
+--------------+------+------+-----+---------+-------+
| Field        | Type | Null | Key | Default | Extra |
+--------------+------+------+-----+---------+-------+
| lib_issue_id | int  | NO   | PRI | NULL    |       |
| book_no      | int  | YES  | MUL | NULL    |       |
| member_id    | int  | YES  | MUL | NULL    |       |
| issue_date   | date | YES  |     | NULL    |       |
| return_date  | date | YES  |     | NULL    |       |
+--------------+------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | NULL        |
|         7002 |     102 |         2 | 2006-12-25 | NULL        |
|         7003 |     104 |         1 | 2006-01-15 | NULL        |
|         7004 |     101 |         1 | 2006-06-04 | NULL        |
|         7005 |     104 |         2 | 2006-11-06 | NULL        |
|         7006 |     101 |         3 | 2006-02-18 | NULL        |
+--------------+---------+-----------+------------+-------------+

**********************************************************************************************************************
31) Modify the Return_Date of 7004,7005 to 15 days after the 
Issue_date.
mysql> update issue set return_date=date_add(issue_date,interval 15 day);
Query OK, 6 rows affected (0.03 sec)
Rows matched: 6  Changed: 6  Warnings: 0

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | 2006-12-25  |
|         7002 |     102 |         2 | 2006-12-25 | 2007-01-09  |
|         7003 |     104 |         1 | 2006-01-15 | 2006-01-30  |
|         7004 |     101 |         1 | 2006-06-04 | 2006-06-19  |
|         7005 |     104 |         2 | 2006-11-06 | 2006-11-21  |
|         7006 |     101 |         3 | 2006-02-18 | 2006-03-05  |
+--------------+---------+-----------+------------+-------------+
**********************************************************************************************************************
32) Remove all the records from Issue table where member_ID is 1 
and Issue date in before 10-Dec-06.
mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | 2006-12-25  |
|         7002 |     102 |         2 | 2006-12-25 | 2007-01-09  |
|         7003 |     104 |         1 | 2006-01-15 | 2006-01-30  |
|         7004 |     101 |         1 | 2006-06-04 | 2006-06-19  |
|         7005 |     104 |         2 | 2006-11-06 | 2006-11-21  |
|         7006 |     101 |         3 | 2006-02-18 | 2006-03-05  |
+--------------+---------+-----------+------------+-------------+
6 rows in set (0.00 sec)

mysql> delete from issue where member_id=1 and issue_date<"2006-12-10";
Query OK, 2 rows affected (0.03 sec)

mysql> select * from issue;
+--------------+---------+-----------+------------+-------------+
| lib_issue_id | book_no | member_id | issue_date | return_date |
+--------------+---------+-----------+------------+-------------+
|         7001 |     101 |         1 | 2006-12-10 | 2006-12-25  |
|         7002 |     102 |         2 | 2006-12-25 | 2007-01-09  |
|         7005 |     104 |         2 | 2006-11-06 | 2006-11-21  |
|         7006 |     101 |         3 | 2006-02-18 | 2006-03-05  |
+--------------+---------+-----------+------------+-------------+
**********************************************************************************************************************

33) Remove all the records from Book table with category other 
than RDBMS and Database.
mysql> delete from book where category not in("databases","RDBMS");
ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`agnmt`.`issue`, CONSTRAINT `issue_ibfk_1` FOREIGN KEY (`book_no`) REFERENCES `book` (`book_no`))
mysql>

**********************************************************************************************************************
34) Remove the table Member
mysql> drop table book;
ERROR 3730 (HY000): Cannot drop table 'book' referenced by a foreign key constraint 'issue_ibfk_1' on table 'issue'.
mysql> drop table member101;
ERROR 3730 (HY000): Cannot drop table 'member101' referenced by a foreign key constraint 'issue_ibfk_2' on table 'issue'.
